// Панель для отображения мышц человека.
// Если у контейнера указан атрибут `data-editable="true"`, панель работает в режиме редактирования:
// пользователь может выбирать группы мышц кликом.

// Конфиг выбранных мышц хранится в `data-config` и триггерит событие `muscle-change` при изменении.

const STATE_COLORS = {
  attention: "#FFE5B4",
  critical: "#FFB4B4",
  normal: "#FFFFFF",
};

const MUSCLE_STATUS = {
  attention: {
    fill: "#E4AE39",
    textColor: "#E4AE39",
    label: "Требует внимания",
  },
  critical: {
    fill: "#FF8E90",
    textColor: "#FF8E90",
    label: "Критическое состояние",
  },
};

const USER_SELECTED_COLOR = "#EBD4FF";

const LINE_LEFT = (color) => `
<svg width="117" height="60" viewBox="0 0 117 60" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M116.048 0.419724C116.1 0.247547 116.003 0.0658684 115.831 0.0139351C115.658 -0.038002 115.477 0.0594749 115.425 0.231647L115.737 0.325684L116.048 0.419724ZM3.47324 57.3257C3.47324 56.3665 2.69572 55.589 1.73658 55.589C0.777443 55.589 -9.15527e-05 56.3665 -9.15527e-05 57.3257C-9.15527e-05 58.2848 0.777443 59.0624 1.73658 59.0624C2.69572 59.0624 3.47324 58.2848 3.47324 57.3257ZM115.737 0.325684L115.425 0.231647L102.842 41.9468L103.154 42.0408L103.465 42.1348L116.048 0.419724L115.737 0.325684ZM82.578 57.3257V57.0001H1.73658V57.3257V57.6513H82.578V57.3257ZM103.154 42.0408L102.842 41.9468C100.146 50.8842 91.9132 57.0001 82.578 57.0001V57.3257V57.6513C92.2004 57.6513 100.687 51.3473 103.465 42.1348L103.154 42.0408Z" fill="${color}"/>
</svg>
`;

const LINE_RIGHT = (color) => `
<svg width="119" height="59" viewBox="0 0 119 59" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2.563e-05 56.3257C2.563e-05 57.2848 0.777559 58.0624 1.73669 58.0624C2.69583 58.0624 3.47336 57.2848 3.47336 56.3257C3.47336 55.3665 2.69583 54.589 1.73669 54.589C0.777559 54.589 2.563e-05 55.3665 2.563e-05 56.3257ZM117.737 0.651309C117.917 0.651309 118.062 0.505522 118.062 0.325684C118.062 0.145846 117.917 5.82039e-05 117.737 5.82039e-05V0.325684V0.651309ZM1.73669 56.3257L2.04751 56.4228L14.8306 15.5054L14.5198 15.4083L14.209 15.3112L1.42588 56.2286L1.73669 56.3257ZM35.0333 0.325684V0.651309H117.737V0.325684V5.82039e-05H35.0333V0.325684ZM14.5198 15.4083L14.8306 15.5054C17.5914 6.66845 25.7751 0.651309 35.0333 0.651309V0.325684V5.82039e-05C25.4903 5.82039e-05 17.0547 6.20234 14.209 15.3112L14.5198 15.4083Z" fill="${color}"/>
</svg>
`;

const $muscleBodies = document.querySelectorAll(".muscle-panel__body");
$muscleBodies.forEach(($muscleBody) => createMuscleMap($muscleBody));

function createTooltip({ label, color, x, y, side }) {
  const tooltip = document.createElement("div");
  tooltip.className = `muscle-tooltip muscle-tooltip--${side}`;

  tooltip.style.left = `${x}px`;
  tooltip.style.top = `${y}px`;
  tooltip.style.color = color;

  tooltip.innerHTML = `
    <div class="muscle-tooltip__text">
      ${label}
    </div>
    ${side === "left" ? LINE_LEFT(color) : LINE_RIGHT(color)}
  `;

  document.body.appendChild(tooltip);

  tooltip.getBoundingClientRect();

  tooltip.classList.add("visible");

  return tooltip;
}

function removeTooltip(tooltip) {
  if (!tooltip) return;

  tooltip.classList.remove("visible");

  setTimeout(() => tooltip.remove(), 200);
}

function addTooltipListeners(svg, getConfig) {
  let activeTooltip = null;

  svg.querySelectorAll("[id]").forEach((el) => {
    el.addEventListener("mouseenter", () => {
      const config = getConfig();
      const id = el.id;
      const state = config[id];

      if (!state || !MUSCLE_STATUS[state]) return;

      if (activeTooltip) {
        removeTooltip(activeTooltip);
        activeTooltip = null;
      }

      const rect = el.getBoundingClientRect();
      const status = MUSCLE_STATUS[state];
      const scrollX = window.scrollX;
      const scrollY = window.scrollY;
      const side = id.includes("right") ? "right" : "left";
      const x = side === "left" ? rect.left + scrollX + rect.width / 2 - 5 : rect.right + scrollX - rect.width / 2;
      const y = side === "left" ? rect.top + scrollY + rect.height / 2 : rect.top + scrollY + rect.height / 2 - 90;

      activeTooltip = createTooltip({ label: status.label, color: status.textColor, x, y, side });
    });

    el.addEventListener("mouseleave", () => {
      removeTooltip(activeTooltip);
      activeTooltip = null;
    });
  });
}

function parseConfig($container) {
  try {
    return JSON.parse($container.dataset.config || "{}");
  } catch {
    console.warn("Ошибка парсинга config JSON");
    return {};
  }
}

function renderFrontSVG() {
  const svgMarkup = `
    <svg class="muscle-panel__body-content" width="288" height="653" viewBox="0 0 288 653" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M143.564 0.216179C149.854 0.198238 158.91 2.27755 165.638 8.58108C172.342 14.8618 176.715 25.3192 173.763 42.0186C174.732 41.4924 176.142 41.0925 177.347 41.1265C177.995 41.1448 178.596 41.2885 179.039 41.6184C179.484 41.9511 179.755 42.4634 179.757 43.1869L179.766 43.3495C179.802 44.1838 179.661 45.3312 179.406 46.6546C179.133 48.0686 178.727 49.6923 178.259 51.3654C177.322 54.7119 176.132 58.2619 175.24 60.7398C175.033 61.3152 174.639 61.8895 173.991 62.0394C173.621 62.1251 173.209 62.13 172.829 61.9576C172.447 61.784 172.114 61.438 171.89 60.852C171.803 60.6246 171.619 60.4683 171.413 60.4814C171.133 60.4993 170.842 60.5678 170.632 60.7175C170.43 60.8618 170.294 61.0877 170.325 61.4518L170.326 61.4688L170.322 61.4856C169.627 64.3515 167.842 71.1826 166.261 75.572C165.482 77.7326 165.824 79.664 166.569 81.2037C167.313 82.7415 168.458 83.8859 169.285 84.4691L199.751 99.0456C201.422 99.8451 203.216 100.355 205.035 100.775C211.882 102.356 220.812 106.434 227.782 114.061C234.755 121.691 239.76 132.867 238.763 148.629C238.704 149.553 238.959 150.484 239.398 151.313C242.254 156.71 246.847 172.303 247.399 201.777C247.42 202.883 247.72 203.965 248.233 204.955C253.791 215.698 263.615 245.595 264.206 291.778C266.116 293.452 268.959 296.358 271.552 299.847C274.16 303.356 276.522 307.465 277.421 311.51C277.647 312.526 277.986 313.514 278.579 314.361C279.595 315.811 280.952 317.635 282.344 319.28C283.74 320.927 285.163 322.385 286.311 323.111C286.874 323.467 287.111 323.864 287.038 324.26C286.967 324.643 286.611 324.967 286.136 325.2C285.177 325.671 283.61 325.837 282.264 325.343L282.256 325.34L282.249 325.336L276.412 322.113C277.171 327.123 277.973 334.341 278.471 340.653C278.724 343.855 278.898 346.825 278.949 349.157C278.974 350.323 278.968 351.331 278.926 352.129C278.884 352.922 278.804 353.521 278.677 353.861C278.436 354.501 277.952 355.282 277.249 355.595C276.892 355.754 276.483 355.791 276.032 355.631C275.584 355.473 275.102 355.124 274.59 354.525C274.233 354.109 273.995 353.612 273.877 353.084C273.436 351.105 272.472 345.4 270.92 332.915C270.845 332.305 270.56 331.585 270.19 331.132C270.004 330.904 269.807 330.757 269.616 330.711C269.435 330.667 269.239 330.711 269.034 330.913C268.796 331.146 268.59 331.557 268.483 332.243C268.43 332.578 268.444 333.212 268.509 334.082C268.574 334.948 268.688 336.037 268.831 337.273C268.974 338.509 269.146 339.891 269.326 341.345C269.505 342.8 269.693 344.325 269.868 345.847C270.218 348.889 270.516 351.918 270.597 354.329C270.637 355.533 270.623 356.587 270.533 357.412C270.488 357.825 270.424 358.183 270.336 358.475C270.25 358.766 270.137 359.002 269.991 359.16C269.398 359.802 268.865 360.187 268.379 360.363C267.888 360.541 267.45 360.504 267.061 360.312C266.677 360.121 266.349 359.782 266.065 359.37C265.78 358.956 265.533 358.461 265.312 357.948C265.224 357.744 265.127 357.336 265.02 356.775C264.913 356.21 264.795 355.477 264.668 354.617C264.416 352.896 264.13 350.66 263.834 348.212C263.537 345.764 263.23 343.105 262.934 340.539L262.892 340.171C262.611 337.736 262.342 335.4 262.103 333.423C262.041 332.914 261.823 332.303 261.531 331.912C261.384 331.716 261.229 331.59 261.079 331.547C260.94 331.508 260.785 331.535 260.613 331.696C260.485 331.816 260.36 331.998 260.25 332.266C260.227 332.323 260.206 332.423 260.189 332.573C260.173 332.72 260.162 332.906 260.156 333.128C260.145 333.573 260.155 334.158 260.182 334.855C260.237 336.248 260.363 338.084 260.529 340.133C260.863 344.23 261.361 349.177 261.787 353.137C261.888 354.076 261.673 355.098 261.193 355.833C260.71 356.573 259.948 357.033 258.975 356.801C258.382 356.659 257.829 356.332 257.409 355.733C256.991 355.137 256.709 354.279 256.639 353.083C255.909 348.333 254.408 338.427 253.744 333.556C253.687 333.141 253.522 332.624 253.292 332.278C253.176 332.105 253.052 331.988 252.93 331.939C252.816 331.894 252.69 331.901 252.542 332.01C252.421 332.099 252.302 332.262 252.209 332.541C252.116 332.82 252.051 333.207 252.033 333.734C251.978 335.293 251.813 339.458 251.525 343.275C251.381 345.182 251.206 347.006 250.998 348.373C250.894 349.056 250.782 349.629 250.659 350.043C250.598 350.25 250.534 350.421 250.464 350.549C250.398 350.669 250.314 350.777 250.2 350.81C249.914 350.894 249.465 350.951 248.968 350.719C248.472 350.488 247.947 349.976 247.492 348.96C246.584 346.931 245.934 342.847 246.377 334.769C246.414 334.105 246.299 333.428 246.096 332.787C245.59 331.185 244.761 327.795 244.323 321.874C244.269 321.142 244.057 320.425 243.779 319.734C242.232 315.884 240.914 307.627 245.451 298.252L245.234 293.144C240.846 284.887 234.074 271.886 228.003 259.691C221.929 247.489 216.55 236.082 214.968 231.043C212.158 222.097 213.007 212.383 214.027 207.323C214.248 206.225 214.227 205.093 213.884 204.032L208.193 186.447C207.96 185.73 206.918 185.747 206.715 186.469C203.884 196.511 199.167 212.394 196.581 218.253C196.018 219.529 195.707 220.95 195.948 222.304C196.749 226.801 197.662 232.904 198.178 238.73C198.693 244.552 198.815 250.113 198.027 253.517C197.786 254.555 197.727 255.625 198.072 256.616C202.291 268.746 209.404 292.729 210.464 309.539C210.694 313.179 211.031 316.799 211.65 320.392C213.684 332.194 214.833 349.695 213.407 368.207C211.981 386.715 207.981 406.241 199.71 422.093C198.396 426.207 196.661 432.987 195.725 439.961C194.787 446.945 194.654 454.103 196.53 458.976C198.767 464.786 200.876 477.299 200.911 491.19C200.947 505.082 198.911 520.373 192.841 531.731C191.473 534.293 189.902 536.727 189.104 539.483C187.507 544.997 184.748 556.86 180.634 579.581C180.25 584.523 179.757 592.019 179.524 598.451C179.407 601.668 179.356 604.618 179.416 606.848C179.446 607.963 179.504 608.897 179.594 609.592C179.64 609.94 179.693 610.226 179.754 610.444C179.817 610.667 179.884 610.804 179.947 610.87C180.043 610.97 180.285 611.17 180.66 611.463C181.031 611.753 181.526 612.131 182.122 612.584L182.24 612.673C183.416 613.569 184.961 614.744 186.704 616.12C190.308 618.963 194.761 622.663 198.563 626.516C202.361 630.364 205.525 634.38 206.531 637.855C207.034 639.596 207 641.212 206.218 642.604C205.438 643.993 203.925 645.139 201.514 645.963C197.177 647.935 190.311 650.494 183.801 651.766C180.545 652.401 177.373 652.716 174.648 652.472C171.925 652.227 169.633 651.422 168.159 649.803C164.531 645.818 159.728 638.368 156.052 631.489C154.214 628.048 152.656 624.746 151.666 622.087C151.172 620.758 150.818 619.587 150.644 618.637C150.556 618.162 150.513 617.74 150.52 617.381C150.528 617.022 150.585 616.717 150.705 616.483C152.457 613.049 155.732 606.631 153.877 597.322L153.832 597.133C152.905 593.056 152.393 583.285 157.51 575.214C158.79 573.194 159.538 570.115 159.897 566.437C160.255 562.762 160.224 558.504 159.955 554.137C159.419 545.407 157.934 536.254 156.728 530.491C154.339 523.251 151.659 502.08 159.344 473.954C159.776 472.371 160.017 470.744 159.968 469.11C159.599 456.711 157.029 429.634 148.993 401.025C148.695 399.962 148.323 398.904 147.976 397.833C147.63 396.764 147.31 395.684 147.118 394.587C145.972 388.03 144.917 370.817 146.157 334.033C146.176 333.464 145.711 332.979 145.134 332.979H141.916C141.34 332.979 140.875 333.464 140.894 334.033C142.134 370.817 141.079 388.03 139.933 394.587C139.741 395.684 139.42 396.764 139.074 397.833C138.728 398.904 138.356 399.962 138.058 401.025C130.022 429.634 127.452 456.711 127.082 469.11C127.034 470.744 127.274 472.371 127.707 473.954C135.392 502.08 132.712 523.251 130.322 530.491C129.117 536.254 127.632 545.407 127.095 554.137C126.827 558.504 126.795 562.762 127.154 566.437C127.513 570.115 128.261 573.194 129.541 575.214C134.657 583.285 134.146 593.056 133.219 597.133L133.174 597.322C131.319 606.631 134.594 613.049 136.346 616.483C136.466 616.717 136.523 617.022 136.53 617.381C136.538 617.74 136.495 618.162 136.407 618.637C136.233 619.587 135.879 620.758 135.384 622.087C134.395 624.746 132.837 628.048 130.998 631.489C127.323 638.368 122.52 645.818 118.891 649.803C117.417 651.422 115.126 652.227 112.403 652.472C109.678 652.716 106.506 652.401 103.25 651.766C96.7402 650.494 89.8742 647.935 85.5366 645.963C83.1256 645.139 81.6123 643.993 80.8324 642.604C80.0513 641.212 80.0163 639.596 80.52 637.855C81.5255 634.38 84.6898 630.364 88.488 626.516C92.2901 622.663 96.7429 618.963 100.346 616.12C102.089 614.744 103.634 613.569 104.811 612.674L104.929 612.584C105.524 612.131 106.019 611.753 106.391 611.463C106.766 611.17 107.008 610.97 107.104 610.87C107.167 610.804 107.234 610.667 107.296 610.444C107.358 610.226 107.411 609.94 107.456 609.592C107.547 608.897 107.605 607.963 107.635 606.848C107.695 604.618 107.643 601.668 107.527 598.451C107.294 592.019 106.801 584.523 106.417 579.581C102.303 556.86 99.5438 544.997 97.9468 539.483C97.1487 536.727 95.5783 534.293 94.2097 531.731C88.1401 520.373 86.1035 505.082 86.1394 491.19C86.1752 477.299 88.2836 464.786 90.5206 458.976C92.3967 454.103 92.2634 446.945 91.326 439.961C90.3899 432.987 88.6548 426.207 87.3407 422.093C79.0702 406.241 75.0698 386.715 73.644 368.207C72.2178 349.695 73.3668 332.194 75.4005 320.392C76.0197 316.799 76.3571 313.179 76.5867 309.539C77.6468 292.729 84.7602 268.746 88.9785 256.616C89.3233 255.625 89.2645 254.555 89.0241 253.517C88.2356 250.113 88.3573 244.552 88.8731 238.73C89.3893 232.904 90.3018 226.801 91.1026 222.304C91.3438 220.95 91.0328 219.529 90.4698 218.253C87.8841 212.394 83.1663 196.511 80.336 186.469C80.1325 185.747 79.0903 185.73 78.8582 186.447L73.1671 204.032C72.8236 205.093 72.8025 206.225 73.0238 207.323C74.0438 212.383 74.8929 222.097 72.0832 231.043C70.5008 236.082 65.1223 247.489 59.0478 259.691C52.9766 271.886 46.2047 284.887 41.8171 293.144L41.5999 298.252C46.1363 307.627 44.8189 315.884 43.2715 319.734C42.9939 320.425 42.7818 321.142 42.7277 321.874C42.2901 327.795 41.4608 331.185 40.9547 332.787C40.752 333.428 40.637 334.105 40.6734 334.769C41.1166 342.847 40.4666 346.931 39.5587 348.96C39.1036 349.976 38.5787 350.488 38.0828 350.719C37.5862 350.951 37.1366 350.894 36.8511 350.81C36.7371 350.777 36.6527 350.669 36.5867 350.549C36.5172 350.421 36.4524 350.25 36.3914 350.043C36.2692 349.629 36.1566 349.056 36.0527 348.373C35.8448 347.006 35.6696 345.182 35.5256 343.275C35.2375 339.458 35.0729 335.293 35.0181 333.734C34.9995 333.207 34.9346 332.82 34.8416 332.541C34.7484 332.262 34.6295 332.099 34.5089 332.01C34.3605 331.901 34.2343 331.894 34.1212 331.939C33.9985 331.988 33.8745 332.105 33.7588 332.278C33.5284 332.624 33.3638 333.141 33.3072 333.556C32.643 338.427 31.1418 348.333 30.4113 353.083C30.3415 354.279 30.0595 355.137 29.6417 355.733C29.2217 356.332 28.6692 356.659 28.0762 356.801C27.1031 357.033 26.3412 356.573 25.8581 355.833C25.3776 355.098 25.1623 354.076 25.2635 353.137C25.6903 349.177 26.1882 344.23 26.5215 340.133C26.6882 338.084 26.8136 336.248 26.8685 334.855C26.896 334.158 26.9058 333.573 26.8945 333.128C26.8888 332.906 26.8778 332.72 26.8615 332.573C26.8448 332.423 26.8234 332.323 26.8004 332.266C26.6908 331.998 26.5655 331.816 26.4373 331.696C26.2655 331.535 26.1107 331.508 25.9714 331.547C25.8218 331.59 25.6668 331.716 25.5201 331.912C25.228 332.303 25.0095 332.914 24.9479 333.423C24.7089 335.401 24.4393 337.739 24.1585 340.175L24.1166 340.539C23.8207 343.105 23.5135 345.764 23.2171 348.212C22.9208 350.66 22.635 352.896 22.3824 354.617C22.256 355.477 22.138 356.21 22.0306 356.775C21.9241 357.336 21.8263 357.744 21.7389 357.948C21.5183 358.461 21.271 358.956 20.9859 359.37C20.7014 359.782 20.3739 360.121 19.9899 360.312C19.6013 360.504 19.163 360.541 18.6723 360.363C18.1861 360.187 17.6524 359.802 17.0597 359.16C16.9134 359.002 16.8012 358.766 16.7144 358.475C16.6271 358.183 16.5628 357.825 16.5178 357.412C16.4277 356.587 16.4136 355.533 16.4539 354.329C16.5346 351.918 16.8333 348.889 17.1829 345.847C17.3577 344.325 17.5455 342.8 17.7253 341.345L17.7614 341.053C17.9279 339.706 18.0862 338.426 18.2197 337.273C18.3627 336.037 18.4769 334.948 18.5416 334.082C18.6066 333.212 18.6208 332.578 18.5682 332.243C18.4605 331.557 18.2543 331.146 18.0172 330.913C17.812 330.711 17.6162 330.667 17.4348 330.711C17.2438 330.757 17.0467 330.904 16.8609 331.132C16.4905 331.585 16.2063 332.305 16.1305 332.915C14.5785 345.4 13.6153 351.105 13.1735 353.084C13.0556 353.612 12.8176 354.109 12.4611 354.525C11.9486 355.124 11.4669 355.473 11.0192 355.631C10.5683 355.791 10.1586 355.754 9.80169 355.595C9.09835 355.282 8.6147 354.501 8.37399 353.861C8.24634 353.521 8.16712 352.922 8.12486 352.129C8.08237 351.331 8.07666 350.323 8.10194 349.157C8.15251 346.825 8.32701 343.855 8.57963 340.653C9.07761 334.341 9.88029 327.123 10.6388 322.113L4.80163 325.336L4.79435 325.34L4.78642 325.343C3.44108 325.837 1.87387 325.671 0.915033 325.2C0.439333 324.967 0.0841733 324.643 0.0130007 324.26C-0.0604725 323.864 0.176891 323.467 0.740024 323.111C1.88794 322.385 3.31104 320.927 4.70631 319.28C6.09911 317.635 7.45616 315.811 8.47166 314.361C9.06517 313.514 9.40356 312.526 9.62946 311.51C10.5286 307.465 12.8904 303.356 15.4988 299.847C18.0918 296.358 20.9348 293.452 22.8451 291.778C23.4356 245.595 33.2596 215.698 38.8181 204.955C39.3305 203.965 39.6311 202.883 39.6518 201.777C40.2042 172.303 44.7966 156.71 47.6527 151.313C48.0918 150.484 48.3466 149.553 48.2881 148.629C47.2903 132.867 52.2961 121.691 59.2686 114.061C66.2386 106.434 75.1686 102.356 82.0154 100.775C83.8343 100.355 85.6291 99.8451 87.3002 99.0456L117.766 84.4691C118.593 83.8859 119.738 82.7415 120.482 81.2037C121.227 79.664 121.568 77.7326 120.79 75.572C119.209 71.1826 117.424 64.3515 116.729 61.4856L116.725 61.4688L116.726 61.4518C116.757 61.0877 116.621 60.8618 116.419 60.7175C116.209 60.5678 115.918 60.4993 115.638 60.4814C115.432 60.4683 115.248 60.6246 115.161 60.852C114.937 61.438 114.604 61.784 114.222 61.9576C113.842 62.13 113.43 62.1251 113.059 62.0394C112.411 61.8895 112.018 61.3152 111.811 60.7398C110.919 58.2619 109.729 54.7119 108.792 51.3654C108.323 49.6923 107.918 48.0686 107.645 46.6546C107.39 45.3312 107.249 44.1838 107.285 43.3495L107.294 43.1869C107.296 42.4634 107.566 41.9511 108.012 41.6184C108.454 41.2885 109.056 41.1448 109.703 41.1265C110.909 41.0925 112.318 41.4924 113.287 42.0186C110.336 25.3192 114.709 14.8618 121.413 8.58108C128.14 2.27755 137.197 0.198241 143.487 0.216179H143.564Z" fill="#DCDCDC"/>
      <path id="calf_1_right" d="M192.479 458.69C189.145 448.117 186.63 455.359 185.789 460.302C178.148 499.126 163.657 577.591 166.815 580.857C170.763 584.94 173.881 577.132 174.931 574.303C175.809 571.939 183.376 548.659 187.653 537.341C205.64 497.586 196.647 471.906 192.479 458.69Z" fill="white"/>
      <path id="calf_2_right" d="M166.596 482.221C162.319 462.988 159.467 481.469 159.248 482.221C157.749 490.53 155.08 510.007 156.396 521.439C158.041 535.729 160.345 536.267 161.222 534.87C162.099 533.473 170.873 501.454 166.596 482.221Z" fill="white"/>
      <path id="gracilis_right" d="M165.592 403.137C164.247 384.185 169.198 349.007 172.319 331.199C172.423 330.604 171.954 330.076 171.338 330.076C170.926 330.076 170.564 330.303 170.424 330.683C161.681 354.391 156.62 424.044 157.273 430.861C157.932 437.738 163.415 445.904 170.653 438.383C175.636 433.204 172.413 422.437 169.093 414.852C167.441 411.077 165.883 407.235 165.592 403.137Z" fill="white"/>
      <path id="adductor_longus_right" d="M174.961 297.936L153.743 326.531C152.74 327.883 151.961 329.382 151.436 330.973C150.362 334.223 149.816 337.616 149.816 341.033V366.501C149.816 368.655 150.169 370.594 150.671 372.212C151.289 374.203 153.54 373.608 153.958 371.567C157.042 356.52 170.21 319.401 177.758 299.359C178.069 298.534 177.59 297.639 176.725 297.402L176.617 297.372C175.999 297.203 175.339 297.428 174.961 297.936Z" fill="white"/>
      <path id="quadricep_right" d="M178.658 421.514C159.657 417.569 170.706 334.516 182.64 292.388C182.964 291.245 184.533 291.143 185.019 292.23C210.23 348.598 194.922 424.89 178.658 421.514Z" fill="white"/>
      <path id="vastus_lateralis_right" d="M199.827 414.53C218.165 365.792 208.345 332.261 201.143 321.588C199.125 320.986 199.425 322.698 199.827 323.63C203.776 332.763 205.421 371.873 199.827 390.784C196.031 403.618 190.651 414.628 187.41 420.362C186.442 422.075 185.587 423.864 185.139 425.772C182.646 436.377 185.486 440.735 189.628 439.35C193.225 438.146 197.926 422.302 199.827 414.53Z" fill="white"/>
      <path id="tensor_fasciae_latae_right" d="M202.424 295.073C201.03 287.816 197.457 275.783 195.143 268.654C194.967 268.113 194.228 268.053 193.976 268.564C190.921 274.752 186.675 287.18 189.847 296.66C194.124 309.447 197.305 310.306 200.376 315.141C202.5 318.487 206.856 326.841 209.556 332.143C209.928 332.874 210.978 332.726 211.055 331.912C211.892 323.101 208.51 310.485 205.473 303.836C204.209 301.069 202.996 298.052 202.424 295.073Z" fill="white"/>
      <path id="oblique_right" d="M179.656 183.911C176.236 187.533 177.816 192.256 179.481 194.846C179.785 195.318 179.976 195.855 179.976 196.413V196.567C179.976 197.096 179.81 197.612 179.5 198.046L178.917 198.863C178.607 199.296 178.441 199.812 178.441 200.342V207.148C178.441 207.712 178.629 208.26 178.977 208.709L179.435 209.299C180.092 210.145 180.151 211.3 179.584 212.207L178.829 213.414C178.575 213.819 178.441 214.286 178.441 214.761V222.589C178.441 223.106 178.599 223.61 178.895 224.037L179.713 225.219C180.219 225.949 180.309 226.88 179.952 227.69L178.656 230.629C178.514 230.951 178.441 231.299 178.441 231.651V240.383C178.441 240.859 178.575 241.325 178.829 241.731L179.864 243.385C180.281 244.053 180.367 244.87 180.096 245.607L177.259 253.316C177.17 253.559 177.118 253.813 177.106 254.07L175.959 278.081C175.937 278.544 176.314 278.932 176.788 278.932C177.004 278.932 177.209 278.852 177.362 278.703C183.181 273.055 190.287 262.003 193.306 256.856C193.415 256.672 193.497 256.478 193.552 256.272C195.736 248.157 193.404 239.995 191.46 235.787C191.043 234.885 191.115 233.837 191.605 232.971C193.813 229.071 192.913 226.108 191.813 224.629C191.505 224.215 191.273 223.735 191.273 223.223C191.273 222.708 191.5 222.222 191.863 221.849C196.17 217.427 195.431 211.135 193.98 207.021C193.564 205.842 194.393 204.422 195.467 203.753C197.139 202.711 198.327 200.852 199.093 199.079C199.739 197.583 198.502 196.09 196.844 196.09H193.395C192.586 196.09 191.931 195.448 191.931 194.656C191.931 194.147 192.212 193.683 192.632 193.383C194.611 191.972 196.121 189.693 197.128 187.664C197.893 186.123 196.661 184.486 194.912 184.486H187.434C185.606 184.486 183.833 184 182.547 183.503C181.558 183.121 180.377 183.147 179.656 183.911Z" fill="white"/>
      <g id="abdominal">
        <path id="abdominal_1" d="M130.983 173.634C140.72 173.341 141.985 183.153 141.192 190.264C140.949 192.444 139.657 194.356 137.751 195.506C129.184 200.673 115.012 205.959 111.79 200.603C108.171 194.586 116.726 174.064 130.983 173.634Z" fill="white"/>
        <path id="abdominal_2" d="M155.848 173.741C146.111 173.448 144.846 183.26 145.639 190.371C145.882 192.552 147.174 194.464 149.08 195.613C157.647 200.78 171.819 206.067 175.041 200.711C178.66 194.693 170.105 174.171 155.848 173.741Z" fill="white"/>
        <path id="abdominal_3" d="M141.403 203.851V214.571C141.403 216.183 140.854 217.257 140.525 217.58C138.718 219.353 124.184 218.977 118.481 218.977C112.778 218.977 109.817 220.373 110.914 211.348C111.695 204.919 127.577 201.789 137.888 200.7C139.787 200.499 141.403 201.98 141.403 203.851Z" fill="white"/>
        <path id="abdominal_4" d="M145.428 203.958V214.679C145.428 216.29 145.977 217.365 146.306 217.687C148.113 219.46 162.647 219.084 168.35 219.084C174.053 219.084 177.014 220.481 175.917 211.455C175.136 205.026 159.254 201.896 148.943 200.807C147.044 200.607 145.428 202.087 145.428 203.958Z" fill="white"/>
        <path id="abdominal_5" d="M141.841 225.366V228.871C141.841 230.36 141.637 231.859 141.048 233.232C136.242 244.442 126.059 243.54 118.809 242.83C111.132 242.078 109.597 232.407 111.022 225.638C112.086 220.587 127.484 219.755 136.581 219.986C137.79 220.016 138.943 220.463 139.869 221.224C141.119 222.251 141.841 223.768 141.841 225.366Z" fill="white"/>
        <path id="abdominal_6" d="M144.99 225.473V228.978C144.99 230.467 145.194 231.966 145.783 233.339C150.589 244.549 160.772 243.647 168.022 242.937C175.699 242.185 177.234 232.515 175.809 225.746C174.745 220.694 159.347 219.862 150.25 220.093C149.041 220.124 147.888 220.571 146.962 221.332C145.712 222.359 144.99 223.875 144.99 225.473Z" fill="white"/>
        <path id="abdominal_7" d="M128.9 244.656C138.639 243.797 140.854 250.172 140.744 253.467C141.695 269.942 143.311 305.127 142.17 314.067C141.331 320.648 139.092 321.849 137.284 321.381C136.01 321.051 135.238 319.835 134.572 318.722C115.576 286.961 111.643 262.43 112.099 251.129C112.189 248.883 113.734 247.05 115.968 246.539C118.732 245.908 122.998 245.177 128.9 244.656Z" fill="white"/>
        <path id="abdominal_8" d="M157.931 244.764C148.192 243.904 145.977 250.279 146.087 253.574C145.136 270.049 143.52 305.235 144.661 314.174C145.501 320.756 147.739 321.956 149.547 321.488C150.821 321.159 151.593 319.942 152.259 318.829C171.255 287.068 175.188 262.537 174.732 251.236C174.642 248.99 173.097 247.157 170.863 246.647C168.099 246.016 163.833 245.285 157.931 244.764Z" fill="white"/>
      </g>
      <path id="pectoralis_major_right" d="M182.718 112.389C178.77 111.702 162.574 112.676 154.97 113.249C150.367 113.249 146.635 116.905 146.635 121.415V164.877C146.635 168.815 149.904 171.998 153.923 171.977C164.841 171.921 180.392 171.885 188.421 172.022C201.034 172.237 204.434 158.269 206.298 151.285C207.582 146.477 210.961 141.456 213.207 138.62C213.755 137.927 213.715 136.927 213.099 136.291C191.788 114.288 187.571 113.235 182.718 112.389Z" fill="white"/>
      <path id="forearm_2_right" d="M230.95 224.953C220.466 215.806 217.628 223.94 217.453 230.852C217.416 232.311 217.731 233.736 218.292 235.088C225.379 252.141 248.352 290.507 249.51 292.363C250.722 294.305 252.8 294.726 254.226 294.297C255.132 294.023 254.898 291.517 254.526 289.546C254.352 288.627 254.023 287.735 253.628 286.883C240.211 257.906 233.604 240.911 233.388 234.664C233.285 231.694 233.052 229.562 232.825 228.168C232.62 226.911 231.921 225.8 230.95 224.953Z" fill="white"/>
      <path id="forearm_1_right" d="M247.426 210.918C241.723 196.219 236.495 206.728 234.594 213.819C230.426 233.374 244.684 263.674 249.4 272.485C254.116 281.296 255.432 287.957 256.748 289.999C257.801 291.632 258.211 290.321 258.284 289.462C261.245 244.441 254.555 229.291 247.426 210.918Z" fill="white"/>
      <path id="bicep_1_right" d="M222.42 148.062C216.454 138.348 213.025 144.552 212.111 148.814C212.55 147.13 211.892 148.921 209.808 164.179C207.551 180.707 213.025 196.807 216.498 202.859C220.044 208.769 227.882 219.6 230.865 215.646C234.594 210.703 239.091 189.536 235.472 175.783C231.853 162.03 229.878 160.203 222.42 148.062Z" fill="white"/>
      <path id="bicep_2_right" d="M239.287 200.44C250.913 174.408 238.948 159.265 231.062 154.727C230.93 154.652 230.783 154.607 230.633 154.637C229.78 154.806 230.122 155.954 230.427 156.55C242.491 177.824 237.994 198.024 237.446 200.066C237.421 200.156 237.4 200.245 237.382 200.332C237.084 201.78 238.683 201.793 239.287 200.44Z" fill="white"/>
      <path id="deltoid_2_right" d="M235.602 144.367C235.441 121.973 220.285 109.527 212.27 106.117C212.162 106.071 212.049 106.048 211.932 106.054C210.592 106.117 210.59 106.898 210.965 107.386C210.996 107.428 211.036 107.464 211.076 107.496C231.525 123.814 232.292 141.404 233.278 145.268C233.567 146.402 233.895 146.964 234.215 147.174C235.259 147.859 235.611 145.598 235.602 144.367Z" fill="white"/>
      <path id="deltoid_1_right" d="M191.622 103.181L178.808 108.268C178.575 108.361 178.384 108.547 178.332 108.789C178.039 110.154 179.269 110.265 179.976 110.133C192.421 106.77 217.565 138.981 230.974 153.36C231.367 153.781 232.066 153.612 232.238 153.067C232.562 152.035 232.648 150.93 232.468 149.865C227.273 119.133 209.857 106.308 198.97 102.694C196.565 101.896 193.976 102.246 191.622 103.181Z" fill="white"/>
      <path id="trapezius_right" d="M192.521 99.284L165.568 85.8414C164.984 85.5503 164.285 85.9639 164.243 86.6042C163.829 92.88 160.92 103.545 158.702 109.518C158.449 110.2 159.102 110.888 159.809 110.675L192.38 100.872C193.134 100.645 193.224 99.6345 192.521 99.284Z" fill="white"/>
      <path id="calf_1_left" d="M94.3521 458.583C97.6862 448.01 100.201 455.252 101.042 460.195C108.683 499.019 123.174 577.483 120.016 580.75C116.068 584.833 112.95 577.025 111.9 574.195C111.022 571.832 103.455 548.552 99.1778 537.234C81.1912 497.479 90.1845 471.799 94.3521 458.583Z" fill="white"/>
      <path id="calf_2_left" d="M120.235 482.114C124.512 462.881 127.364 481.362 127.583 482.114C129.082 490.423 131.751 509.899 130.435 521.332C128.79 535.622 126.486 536.159 125.609 534.763C124.732 533.366 115.958 501.347 120.235 482.114Z" fill="white"/>
      <path id="gracilis_left" d="M121.239 403.03C122.584 384.078 117.633 348.9 114.512 331.091C114.408 330.497 114.877 329.969 115.493 329.969C115.905 329.969 116.267 330.196 116.407 330.576C125.15 354.284 130.211 423.937 129.558 430.754C128.899 437.631 123.416 445.797 116.178 438.275C111.195 433.096 114.418 422.329 117.738 414.745C119.39 410.97 120.948 407.128 121.239 403.03Z" fill="white"/>
      <path id="adductor_longus_left" d="M111.87 297.829L133.088 326.424C134.091 327.776 134.87 329.275 135.395 330.866C136.469 334.116 137.015 337.509 137.015 340.925V366.393C137.015 368.548 136.662 370.487 136.16 372.105C135.542 374.096 133.291 373.5 132.873 371.46C129.789 356.413 116.621 319.293 109.073 299.252C108.762 298.427 109.241 297.532 110.106 297.295L110.214 297.265C110.832 297.095 111.492 297.32 111.87 297.829Z" fill="white"/>
      <path id="quadricep_left" d="M108.173 421.406C127.174 417.462 116.125 334.409 104.191 292.28C103.867 291.137 102.298 291.036 101.812 292.123C76.6011 348.491 91.9093 424.782 108.173 421.406Z" fill="white"/>
      <path id="vastus_lateralis_left" d="M87.0037 414.422C68.6661 365.684 78.4856 332.154 85.6876 321.481C87.7056 320.879 87.4058 322.591 87.0037 323.522C83.0553 332.655 81.4103 371.766 87.0037 390.676C90.7999 403.511 96.1802 414.521 99.421 420.254C100.389 421.967 101.244 423.756 101.692 425.665C104.185 436.27 101.345 440.628 97.2034 439.242C93.6061 438.039 88.9047 422.194 87.0037 414.422Z" fill="white"/>
      <path id="tensor_fasciae_latae_left" d="M84.4073 294.965C85.8013 287.708 89.3741 275.676 91.6881 268.547C91.8638 268.006 92.603 267.946 92.8554 268.457C95.9095 274.645 100.156 287.073 96.9842 296.553C92.7069 309.339 89.5264 310.199 86.4555 315.034C84.3308 318.379 79.9748 326.734 77.2754 332.036C76.9031 332.767 75.8535 332.618 75.7762 331.805C74.9392 322.994 78.3207 310.378 81.3584 303.729C82.6225 300.962 83.8351 297.944 84.4073 294.965Z" fill="white"/>
      <path id="oblique_left" d="M107.175 183.804C110.595 187.425 109.015 192.148 107.35 194.738C107.046 195.211 106.855 195.747 106.855 196.305V196.459C106.855 196.988 107.021 197.505 107.331 197.938L107.914 198.755C108.224 199.189 108.39 199.705 108.39 200.234V207.041C108.39 207.604 108.202 208.152 107.854 208.601L107.396 209.192C106.739 210.038 106.68 211.193 107.247 212.099L108.002 213.306C108.256 213.712 108.39 214.178 108.39 214.654V222.482C108.39 222.998 108.232 223.503 107.936 223.93L107.118 225.112C106.612 225.841 106.522 226.773 106.879 227.582L108.175 230.521C108.317 230.844 108.39 231.192 108.39 231.544V240.276C108.39 240.751 108.256 241.218 108.002 241.623L106.967 243.278C106.55 243.945 106.464 244.763 106.735 245.5L109.572 253.209C109.661 253.451 109.713 253.705 109.725 253.963L110.872 277.973C110.894 278.437 110.517 278.824 110.043 278.824C109.827 278.824 109.622 278.745 109.469 278.596C103.65 272.948 96.5444 261.896 93.5247 256.749C93.4164 256.564 93.3345 256.371 93.279 256.165C91.0946 248.05 93.427 239.887 95.3712 235.68C95.7878 234.778 95.7156 233.729 95.2256 232.864C93.0176 228.964 93.9178 226.001 95.0178 224.521C95.3256 224.107 95.5583 223.628 95.5583 223.116C95.5583 222.601 95.3307 222.114 94.9679 221.742C90.6605 217.319 91.3996 211.027 92.8513 206.914C93.2674 205.735 92.4384 204.315 91.3638 203.645C89.6922 202.604 88.5043 200.744 87.7385 198.972C87.0921 197.476 88.3285 195.983 89.9869 195.983H93.4364C94.2449 195.983 94.9003 195.341 94.9003 194.549C94.9003 194.04 94.6191 193.576 94.1988 193.276C92.2202 191.865 90.7102 189.586 89.703 187.557C88.9382 186.016 90.17 184.379 91.9188 184.379H99.397C101.225 184.379 102.998 183.893 104.284 183.396C105.273 183.014 106.454 183.04 107.175 183.804Z" fill="white"/>
      <path id="pectoralis_major_left" d="M104.113 112.282C108.061 111.594 124.257 112.568 131.861 113.142C136.464 113.142 140.196 116.798 140.196 121.307V164.77C140.196 168.707 136.927 171.891 132.908 171.87C121.99 171.814 106.439 171.778 98.4099 171.915C85.7973 172.13 82.3974 158.162 80.5329 151.178C79.2492 146.369 75.8699 141.349 73.6244 138.513C73.0758 137.82 73.1156 136.819 73.7318 136.183C95.0427 114.18 99.2596 113.127 104.113 112.282Z" fill="white"/>
      <path id="forearm_2_left" d="M55.8807 224.846C66.3648 215.699 69.2034 223.832 69.378 230.745C69.4149 232.203 69.1002 233.629 68.5386 234.98C61.4516 252.033 38.4788 290.399 37.3211 292.255C36.1092 294.198 34.0308 294.619 32.605 294.189C31.6989 293.916 31.9326 291.409 32.3052 289.439C32.4791 288.519 32.8085 287.627 33.2028 286.776C46.6202 257.799 53.2271 240.804 53.4432 234.556C53.546 231.587 53.7791 229.455 54.0061 228.061C54.2109 226.803 54.9099 225.693 55.8807 224.846Z" fill="white"/>
      <path id="forearm_1_left" d="M39.4051 210.811C45.1082 196.112 50.336 206.62 52.237 213.712C56.4047 233.267 42.147 263.567 37.4309 272.378C32.7149 281.188 31.3988 287.85 30.0827 289.891C29.0299 291.525 28.6204 290.214 28.5473 289.354C25.5861 244.334 32.2762 229.184 39.4051 210.811Z" fill="white"/>
      <path id="bicep_1_left" d="M64.4105 147.954C70.3768 138.241 73.8059 144.444 74.7198 148.706C74.2811 147.023 74.9395 148.814 77.0231 164.071C79.2804 180.6 73.806 196.699 70.333 202.752C66.7868 208.662 58.9487 219.492 55.9656 215.538C52.2366 210.596 47.74 189.429 51.3592 175.676C54.9785 161.922 56.9526 160.096 64.4105 147.954Z" fill="white"/>
      <path id="bicep_2_left" d="M47.5439 200.333C35.9178 174.301 47.8826 159.158 55.7693 154.62C55.9006 154.544 56.0483 154.5 56.1976 154.529C57.0507 154.698 56.7088 155.846 56.4044 156.443C44.3402 177.717 48.8369 197.917 49.3853 199.958C49.4095 200.049 49.4306 200.138 49.4486 200.225C49.7474 201.672 48.1482 201.686 47.5439 200.333Z" fill="white"/>
      <path id="deltoid_2_left" d="M51.2286 144.26C51.3902 121.866 66.5461 109.42 74.561 106.01C74.669 105.964 74.7817 105.941 74.8993 105.947C76.2387 106.01 76.2405 106.79 75.8663 107.279C75.8348 107.32 75.7953 107.357 75.7546 107.389C55.3062 123.707 54.5389 141.296 53.5529 145.161C53.2636 146.294 52.936 146.857 52.6155 147.067C51.5717 147.752 51.2197 145.491 51.2286 144.26Z" fill="white"/>
      <path id="deltoid_1_left" d="M95.2086 103.073L108.023 108.16C108.256 108.253 108.447 108.44 108.499 108.681C108.792 110.046 107.562 110.158 106.855 110.026C94.4097 106.662 69.266 138.873 55.8568 153.253C55.4641 153.674 54.7647 153.505 54.5935 152.96C54.2694 151.928 54.1833 150.823 54.3633 149.758C59.5579 119.026 76.9736 106.2 87.8611 102.587C90.2662 101.788 92.8551 102.139 95.2086 103.073Z" fill="white"/>
      <path id="trapezius_left" d="M94.3102 99.1767L121.263 85.7341C121.847 85.4429 122.546 85.8565 122.588 86.4969C123.002 92.7726 125.911 103.438 128.129 109.411C128.382 110.092 127.729 110.781 127.022 110.568L94.4506 100.764C93.6967 100.537 93.6074 99.5272 94.3102 99.1767Z" fill="white"/>
      </svg>
  `;

  return svgMarkup;
}

function renderBackSVG() {
  const svgMarkup = `
    <svg class="muscle-panel__body-content" width="288" height="653" viewBox="0 0 288 653" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M143.49 0.000114983C149.776 -0.0178321 158.828 2.06215 165.552 8.36772C172.252 14.6505 176.623 25.1112 173.673 41.8161C174.642 41.2897 176.05 40.8897 177.255 40.9237C177.902 40.942 178.504 41.0857 178.946 41.4158C179.391 41.7486 179.662 42.261 179.663 42.9848L179.673 43.1474C179.708 43.982 179.568 45.1297 179.312 46.4536C179.04 47.8681 178.635 49.4923 178.167 51.1659C177.23 54.5135 176.04 58.0647 175.149 60.5433C174.942 61.1189 174.549 61.6935 173.901 61.8434C173.531 61.9291 173.119 61.934 172.739 61.7615C172.358 61.5879 172.024 61.2417 171.801 60.6556C171.714 60.4281 171.53 60.2718 171.324 60.2849C171.044 60.3027 170.753 60.3713 170.543 60.521C170.341 60.6654 170.205 60.8913 170.236 61.2556L170.238 61.2726L170.234 61.2894C169.539 64.1562 167.755 70.9895 166.175 75.3804C165.397 77.5417 165.738 79.4737 166.483 81.0139C167.226 82.5522 168.371 83.697 169.197 84.2803L199.647 98.8615C201.317 99.6613 203.111 100.172 204.929 100.592C211.772 102.173 220.698 106.252 227.664 113.882C234.633 121.514 239.636 132.694 238.639 148.461C238.58 149.385 238.835 150.316 239.274 151.146C242.128 156.544 246.718 172.142 247.27 201.626C247.291 202.733 247.592 203.815 248.104 204.805C253.659 215.551 263.478 245.458 264.069 291.656C265.978 293.331 268.819 296.238 271.411 299.728C274.018 303.239 276.379 307.349 277.277 311.395C277.503 312.411 277.841 313.4 278.434 314.247C279.449 315.697 280.806 317.522 282.198 319.167C283.592 320.815 285.015 322.273 286.162 322.999C286.725 323.355 286.962 323.753 286.889 324.149C286.818 324.532 286.463 324.856 285.987 325.09C285.029 325.561 283.462 325.727 282.118 325.232L282.11 325.229L282.103 325.225L276.268 322.001C277.027 327.013 277.829 334.233 278.327 340.547C278.579 343.75 278.753 346.722 278.804 349.054C278.829 350.22 278.824 351.228 278.781 352.027C278.739 352.82 278.66 353.419 278.532 353.759C278.292 354.399 277.808 355.181 277.105 355.494C276.748 355.653 276.339 355.69 275.888 355.53C275.441 355.372 274.959 355.022 274.447 354.424C274.091 354.007 273.853 353.511 273.735 352.982C273.294 351.003 272.331 345.296 270.78 332.807C270.704 332.197 270.42 331.477 270.05 331.023C269.864 330.796 269.667 330.648 269.476 330.602C269.295 330.558 269.099 330.602 268.894 330.804C268.657 331.037 268.451 331.448 268.343 332.134C268.291 332.47 268.305 333.104 268.37 333.974C268.434 334.841 268.549 335.929 268.692 337.166C268.825 338.317 268.983 339.596 269.149 340.941L269.186 341.24C269.365 342.694 269.553 344.221 269.728 345.743C270.077 348.786 270.376 351.816 270.456 354.227C270.497 355.432 270.483 356.487 270.393 357.312C270.348 357.724 270.283 358.083 270.196 358.375C270.109 358.667 269.997 358.902 269.851 359.06C269.259 359.702 268.725 360.088 268.239 360.264C267.749 360.442 267.311 360.405 266.922 360.212C266.538 360.021 266.211 359.683 265.927 359.27C265.642 358.857 265.395 358.361 265.174 357.848C265.087 357.644 264.989 357.236 264.883 356.675C264.775 356.109 264.657 355.376 264.531 354.516C264.279 352.795 263.993 350.557 263.697 348.109C263.4 345.66 263.093 343 262.798 340.433L262.755 340.062C262.475 337.628 262.206 335.291 261.967 333.315C261.905 332.806 261.687 332.194 261.395 331.804C261.248 331.608 261.093 331.481 260.944 331.439C260.805 331.399 260.65 331.427 260.478 331.587C260.35 331.707 260.225 331.889 260.115 332.158C260.092 332.214 260.071 332.315 260.054 332.464C260.038 332.611 260.027 332.797 260.021 333.02C260.01 333.465 260.02 334.05 260.047 334.747C260.102 336.141 260.227 337.977 260.394 340.027C260.727 344.125 261.225 349.073 261.651 353.035C261.753 353.975 261.537 354.997 261.057 355.732C260.574 356.472 259.813 356.933 258.84 356.7C258.247 356.559 257.695 356.231 257.275 355.632C256.858 355.036 256.576 354.178 256.506 352.981C255.776 348.23 254.276 338.321 253.612 333.448C253.555 333.032 253.391 332.515 253.161 332.17C253.045 331.996 252.921 331.879 252.798 331.83C252.685 331.785 252.559 331.793 252.411 331.902C252.29 331.99 252.171 332.153 252.078 332.433C251.985 332.711 251.92 333.099 251.902 333.626C251.847 335.185 251.683 339.352 251.395 343.17C251.251 345.078 251.076 346.902 250.868 348.27C250.764 348.953 250.651 349.526 250.529 349.94C250.468 350.147 250.404 350.319 250.334 350.446C250.268 350.567 250.184 350.674 250.07 350.708C249.784 350.792 249.335 350.849 248.839 350.617C248.343 350.385 247.818 349.873 247.364 348.856C246.456 346.827 245.806 342.742 246.249 334.661C246.286 333.997 246.171 333.32 245.968 332.679C245.462 331.076 244.634 327.685 244.196 321.762C244.142 321.03 243.93 320.312 243.653 319.621C242.106 315.77 240.789 307.511 245.324 298.132L245.106 293.023C240.721 284.763 233.953 271.758 227.885 259.559C221.813 247.353 216.438 235.942 214.856 230.902C212.048 221.953 212.896 212.235 213.916 207.174C214.137 206.075 214.116 204.943 213.773 203.881L208.084 186.291C207.852 185.574 206.811 185.591 206.607 186.313C203.779 196.358 199.063 212.246 196.479 218.107C195.916 219.384 195.605 220.805 195.846 222.16C196.647 226.658 197.559 232.763 198.075 238.591C198.59 244.415 198.712 249.978 197.924 253.383C197.684 254.421 197.625 255.492 197.969 256.483C202.186 268.617 209.295 292.607 210.355 309.423C210.584 313.065 210.921 316.685 211.54 320.28C213.573 332.085 214.721 349.593 213.296 368.11C211.871 386.624 207.873 406.156 199.606 422.013C198.293 426.129 196.559 432.911 195.623 439.888C194.686 446.874 194.553 454.034 196.428 458.908C198.664 464.72 200.771 477.238 200.807 491.133C200.843 505.029 198.807 520.325 192.741 531.688C191.373 534.25 189.804 536.685 189.006 539.442C187.41 544.957 184.652 556.825 180.54 579.553C180.156 584.496 179.664 591.994 179.431 598.429C179.314 601.647 179.263 604.598 179.323 606.829C179.353 607.944 179.41 608.878 179.501 609.574C179.547 609.922 179.6 610.208 179.661 610.426C179.724 610.649 179.791 610.786 179.853 610.852C179.95 610.952 180.191 611.152 180.566 611.445C180.937 611.736 181.432 612.113 182.027 612.566L182.146 612.657C183.322 613.552 184.866 614.728 186.608 616.103C190.209 618.947 194.66 622.649 198.46 626.503C202.256 630.352 205.419 634.369 206.424 637.845C206.927 639.587 206.892 641.204 206.111 642.596C205.332 643.985 203.819 645.131 201.41 645.956C197.074 647.929 190.212 650.489 183.705 651.761C180.451 652.397 177.281 652.712 174.557 652.467C171.836 652.222 169.545 651.417 168.072 649.797C164.446 645.811 159.645 638.359 155.971 631.477C154.134 628.035 152.576 624.732 151.588 622.073C151.093 620.743 150.74 619.571 150.565 618.622C150.478 618.147 150.435 617.724 150.442 617.364C150.449 617.006 150.507 616.701 150.627 616.466C152.378 613.032 155.651 606.612 153.797 597.3L153.752 597.11C152.825 593.032 152.314 583.258 157.428 575.184C158.708 573.164 159.455 570.083 159.814 566.404C160.172 562.728 160.141 558.469 159.872 554.101C159.336 545.367 157.852 536.212 156.647 530.447C154.259 523.204 151.58 502.027 159.261 473.892C159.694 472.308 159.934 470.68 159.885 469.046C159.516 456.643 156.947 429.557 148.916 400.939C148.617 399.875 148.246 398.817 147.9 397.746C147.554 396.676 147.234 395.596 147.042 394.498C145.896 387.939 144.842 370.721 146.081 333.926C146.1 333.356 145.635 332.87 145.059 332.87H141.843C141.267 332.87 140.802 333.356 140.821 333.926C142.06 370.721 141.006 387.939 139.86 394.498C139.668 395.596 139.348 396.676 139.002 397.746C138.656 398.817 138.284 399.875 137.986 400.939C129.954 429.557 127.386 456.643 127.016 469.046C126.968 470.68 127.208 472.308 127.641 473.892C135.322 502.027 132.643 523.204 130.255 530.447C129.05 536.212 127.566 545.367 127.029 554.101C126.761 558.469 126.73 562.728 127.088 566.404C127.446 570.083 128.194 573.164 129.474 575.184C134.587 583.258 134.077 593.032 133.149 597.11L133.105 597.3C131.25 606.612 134.524 613.032 136.275 616.466C136.395 616.701 136.452 617.006 136.46 617.364C136.467 617.724 136.424 618.147 136.336 618.622C136.162 619.571 135.808 620.743 135.314 622.073C134.325 624.732 132.768 628.035 130.93 631.477C127.257 638.359 122.456 645.811 118.83 649.797C117.356 651.417 115.066 652.222 112.344 652.467C109.621 652.712 106.45 652.397 103.196 651.761C96.69 650.489 89.8275 647.929 85.4922 645.956C83.0824 645.131 81.57 643.985 80.7904 642.596C80.0097 641.204 79.9748 639.587 80.4782 637.845C81.4832 634.369 84.6458 630.352 88.442 626.503C92.2422 622.649 96.6927 618.947 100.294 616.103C102.035 614.728 103.578 613.553 104.754 612.658L104.874 612.566C105.47 612.113 105.964 611.736 106.336 611.445C106.71 611.152 106.952 610.952 107.048 610.852C107.111 610.786 107.178 610.649 107.241 610.426C107.302 610.208 107.355 609.922 107.401 609.574C107.491 608.878 107.549 607.944 107.579 606.829C107.639 604.598 107.587 601.647 107.471 598.429C107.238 591.994 106.745 584.496 106.362 579.553C102.25 556.825 99.4921 544.957 97.8959 539.442C97.0982 536.685 95.5287 534.25 94.1608 531.688C88.0943 520.325 86.0588 505.029 86.0947 491.133C86.1305 477.238 88.2378 464.72 90.4736 458.908C92.3487 454.034 92.2155 446.874 91.2786 439.888C90.3429 432.911 88.6088 426.129 87.2953 422.013C79.0292 406.156 75.0308 386.624 73.6057 368.11C72.1803 349.593 73.3287 332.085 75.3613 320.28C75.9803 316.685 76.3175 313.065 76.547 309.423C77.6065 292.607 84.7162 268.617 88.9323 256.483C89.2769 255.492 89.2181 254.421 88.9779 253.383C88.1898 249.978 88.3115 244.415 88.827 238.591C89.3429 232.763 90.255 226.658 91.0553 222.16C91.2963 220.805 90.9855 219.384 90.4228 218.107C87.8384 212.246 83.1232 196.358 80.2943 186.313C80.0909 185.591 79.0493 185.574 78.8173 186.291L73.1291 203.881C72.7858 204.943 72.7646 206.075 72.9859 207.174C74.0054 212.235 74.854 221.953 72.0458 230.902C70.4642 235.942 65.0885 247.353 59.0171 259.559C52.9491 271.758 46.1807 284.763 41.7954 293.023L41.5783 298.132C46.1124 307.511 44.7956 315.77 43.2491 319.621C42.9716 320.312 42.7596 321.03 42.7055 321.762C42.2681 327.685 41.4393 331.076 40.9334 332.679C40.7308 333.32 40.6159 333.997 40.6523 334.661C41.0953 342.742 40.4456 346.827 39.5381 348.856C39.0833 349.873 38.5587 350.385 38.063 350.617C37.5667 350.849 37.1174 350.792 36.8319 350.708C36.7181 350.674 36.6337 350.567 36.5677 350.446C36.4982 350.319 36.4334 350.147 36.3725 349.94C36.2503 349.526 36.1378 348.953 36.034 348.27C35.8261 346.902 35.651 345.078 35.5071 343.17C35.2192 339.352 35.0547 335.185 34.9999 333.626C34.9814 333.099 34.9165 332.711 34.8235 332.433C34.7304 332.153 34.6115 331.99 34.491 331.902C34.3427 331.793 34.2165 331.785 34.1035 331.83C33.9808 331.879 33.8569 331.996 33.7412 332.17C33.511 332.515 33.3465 333.032 33.2899 333.448C32.6261 338.321 31.1257 348.23 30.3955 352.981C30.3257 354.178 30.0439 355.036 29.6263 355.632C29.2066 356.231 28.6543 356.559 28.0617 356.7C27.089 356.933 26.3275 356.472 25.8447 355.732C25.3645 354.997 25.1492 353.975 25.2504 353.035C25.677 349.073 26.1746 344.125 26.5077 340.027C26.6743 337.977 26.7997 336.141 26.8546 334.747C26.882 334.05 26.8918 333.465 26.8805 333.02C26.8748 332.797 26.8639 332.611 26.8475 332.464C26.8309 332.315 26.8095 332.214 26.7865 332.158C26.677 331.889 26.5517 331.707 26.4236 331.587C26.2519 331.427 26.0971 331.399 25.9579 331.439C25.8084 331.481 25.6534 331.608 25.5068 331.804C25.2149 332.194 24.9965 332.806 24.935 333.315C24.6961 335.293 24.4267 337.632 24.1461 340.068L24.1041 340.433C23.8084 343 23.5013 345.66 23.2051 348.109C22.9089 350.557 22.6233 352.795 22.3707 354.516C22.2445 355.376 22.1265 356.109 22.0192 356.675C21.9127 357.236 21.815 357.644 21.7276 357.848C21.5071 358.361 21.26 358.857 20.975 359.27C20.6907 359.683 20.3633 360.021 19.9795 360.212C19.5911 360.405 19.153 360.442 18.6626 360.264C18.1767 360.088 17.6432 359.702 17.0509 359.06C16.9046 358.902 16.7925 358.667 16.7057 358.375C16.6185 358.083 16.5542 357.724 16.5092 357.312C16.4191 356.487 16.4051 355.432 16.4454 354.227C16.526 351.816 16.8245 348.786 17.174 345.743C17.3487 344.221 17.5364 342.694 17.7161 341.24L17.7522 340.948C17.9186 339.6 18.0768 338.319 18.2102 337.166C18.3532 335.929 18.4673 334.841 18.532 333.974C18.597 333.104 18.6111 332.47 18.5585 332.134C18.4509 331.448 18.2449 331.037 18.0079 330.804C17.8027 330.602 17.607 330.558 17.4257 330.602C17.2348 330.648 17.0378 330.796 16.8522 331.023C16.4819 331.477 16.1979 332.197 16.1221 332.807C14.5709 345.296 13.6082 351.003 13.1667 352.982C13.0488 353.511 12.811 354.007 12.4546 354.424C11.9424 355.022 11.4609 355.372 11.0135 355.53C10.5628 355.69 10.1533 355.653 9.7966 355.494C9.09363 355.181 8.61023 354.399 8.36964 353.759C8.24205 353.419 8.16288 352.82 8.12064 352.027C8.07817 351.228 8.07247 350.22 8.09773 349.054C8.14828 346.722 8.32269 343.75 8.57517 340.547C9.0729 334.233 9.87516 327.013 10.6333 322.001L4.79914 325.225L4.79186 325.229L4.78394 325.232C3.43929 325.727 1.8729 325.561 0.914558 325.09C0.439105 324.856 0.0841296 324.532 0.012994 324.149C-0.0604411 323.753 0.1768 323.355 0.73964 322.999C1.88696 322.273 3.30932 320.815 4.70387 319.167C6.09594 317.522 7.45229 315.697 8.46727 314.247C9.06046 313.4 9.39868 312.411 9.62446 311.395C10.5231 307.349 12.8837 303.239 15.4907 299.728C18.0824 296.238 20.924 293.331 22.8332 291.656C23.4234 245.458 33.2423 215.551 38.798 204.805C39.31 203.815 39.6105 202.733 39.6313 201.626C40.1833 172.142 44.7734 156.544 47.628 151.146C48.0669 150.316 48.3215 149.385 48.263 148.461C47.2658 132.694 52.269 121.514 59.2379 113.882C66.2042 106.252 75.1296 102.173 81.9728 100.592C83.7908 100.172 85.5846 99.6613 87.2548 98.8615L117.705 84.2803C118.531 83.697 119.676 82.5522 120.419 81.0139C121.164 79.4737 121.505 77.5417 120.727 75.3804C119.147 70.9895 117.363 64.1562 116.668 61.2894L116.664 61.2726L116.666 61.2556C116.697 60.8913 116.56 60.6654 116.358 60.521C116.149 60.3713 115.858 60.3027 115.578 60.2849C115.372 60.2718 115.188 60.4281 115.101 60.6556C114.877 61.2417 114.544 61.5879 114.162 61.7615C113.783 61.934 113.371 61.9291 113.001 61.8434C112.353 61.6935 111.96 61.1189 111.753 60.5433C110.862 58.0647 109.672 54.5135 108.735 51.1659C108.267 49.4923 107.862 47.8681 107.589 46.4536C107.334 45.1297 107.193 43.982 107.229 43.1474L107.238 42.9848C107.24 42.261 107.511 41.7486 107.956 41.4158C108.398 41.0857 108.999 40.942 109.646 40.9237C110.851 40.8897 112.26 41.2897 113.228 41.8161C110.278 25.1112 114.65 14.6505 121.35 8.36772C128.074 2.06215 137.126 -0.0178292 143.412 0.000114983H143.49Z" fill="#DCDCDC"/>
      <path id="soleus_2_left" d="M119.978 465.723C112.24 449.117 109.147 463.223 108.567 472.352C108.567 481.046 110.74 501.912 111.609 510.606C112.696 521.473 118.239 532.014 126.281 525.168C134.323 518.321 129.65 486.48 119.978 465.723Z" fill="white"/>
      <path id="achilles_tendon_left" d="M101.611 530.928C93.9972 535.004 107.875 569.54 118.452 592.126C119.493 594.349 122.742 593.688 122.882 591.237L126.188 533.205C126.244 532.225 125.697 531.303 124.78 530.95C119.494 528.918 109.399 526.759 101.611 530.928Z" fill="white"/>
      <path id="bicep_femoris_2_left " d="M130.844 334.77C129.756 334.77 121.968 337.046 115.245 339.086C111.529 340.214 109.234 343.909 109.801 347.751C114.636 380.517 120.374 432.142 125.736 432.142C137.365 432.142 135.626 348.137 135.735 341.942C135.843 335.748 132.692 334.77 130.844 334.77Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="soleus_1_left" d="M107.514 512.627C104.645 502.946 105.67 479.61 106.903 465.087C107.119 462.547 106.442 460.017 104.956 457.946C104.466 457.265 103.909 456.616 103.211 456.15C97.4277 452.291 94.2668 459.972 93.2554 465.066C90.6792 476.949 87.0484 503.802 93.1342 516.148C95.7043 521.191 101.792 528.045 107.352 519.628C108.674 517.626 108.196 514.928 107.514 512.627Z" fill="white"/>
      <path id="bicep_femoris_1_left" d="M105.958 434.642C103.83 434.412 101.585 438.734 99.9209 443.154C99.3525 444.664 96.9701 444.555 96.6726 442.97C92.8794 422.76 87.2026 387.954 87.5917 371.067C88.1351 347.485 101.85 342.921 105.958 342.92C110.74 342.92 111.428 376.284 115.521 399.975L122.651 453.968C122.869 455.624 120.644 456.371 119.819 454.918L110.682 438.828C109.987 437.605 107.356 434.793 105.958 434.642Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="bicep_femoris_3_left " d="M77.9194 379.326C76.5431 359.697 77.3847 345.996 78.2695 339.331C78.3861 338.453 79.5155 338.378 79.794 339.219L83.9678 351.827C83.9927 351.902 84.007 351.977 84.0107 352.056C84.7711 368.287 85.8267 400.452 84.0053 400.192C82.1796 399.931 79.1873 386.173 77.9194 379.326Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="gluteus_maximus_left" d="M92.482 281.666V263.108C92.482 260.853 94.727 259.286 96.8004 260.173C129.499 274.161 138.186 305.599 138.446 320.945C138.456 321.537 138.296 322.107 137.962 322.597C130.111 334.137 107.274 339.336 95.6839 340.638C95.0137 340.714 94.3817 340.984 93.8717 341.425L90.9336 343.969C89.2119 345.459 86.5315 344.77 85.7418 342.634L80.9474 329.666C80.8136 329.304 80.7451 328.921 80.7451 328.535V326.184C80.7451 311.637 84.3951 297.323 91.3609 284.552L92.0839 283.227C92.3451 282.748 92.482 282.211 92.482 281.666Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="forearm_back_2_left" d="M41.595 287.687L41.9377 285.288C41.9447 285.239 41.9561 285.19 41.9715 285.142L54.6633 246.091C59.9521 232.507 70.8123 208.489 71.9426 221.096C72.9998 232.888 54.4224 268.614 43.1831 288.241C42.7093 289.068 41.4602 288.631 41.595 287.687Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="forearm_back_1_left" d="M25.7562 297.277C24.1912 296.408 25.1041 290.901 25.7562 288.257C30.0164 246.091 35.9714 223.052 39.5577 216.858C40.2227 215.709 42.2853 211.483 43.442 212.954C43.5419 213.081 43.574 213.255 43.5668 213.417C42.7377 232.063 51.1673 234.378 57.068 232.878C57.8572 232.678 58.6585 233.505 58.3131 234.242C50.4599 251.014 36.6932 283.037 37.2755 292.604C38.0362 305.102 27.7123 298.364 25.7562 297.277Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="erector_spinae_left" d="M139.647 270.869C135.229 264.16 138.677 237.166 141.333 222.233C141.579 220.849 140.519 219.574 139.114 219.574C138.137 219.574 137.275 220.202 136.969 221.13C134.78 227.753 130.438 239.444 127.149 243.374C123.782 247.399 123.318 259.629 123.521 266.192C123.543 266.892 123.858 267.545 124.38 268.012L139.379 281.408C140.246 282.182 141.588 282.28 142.087 281.231C142.967 279.378 143.028 276.003 139.647 270.869Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="external_oblique_back_left" d="M95.7425 239.57C93.9483 235.656 92.2688 238.065 91.5294 240.054C91.435 240.307 91.3955 240.578 91.3955 240.849V252.621C91.3955 253.613 91.9589 254.52 92.8488 254.959L101.056 259.012C103.389 260.164 105.805 257.556 104.492 255.31C100.959 249.267 97.0314 242.382 95.7425 239.57Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="latissimus_dorsi_left" d="M105.328 172.866C95.2523 172.447 88.6391 165.573 85.8465 160.789C85.4246 160.066 84.67 159.586 83.833 159.586C82.7946 159.586 81.8954 160.317 81.8091 161.352C81.5522 164.434 81.819 169.596 84.223 174.474C85.2793 176.618 86.034 179.501 86.5645 182.556C88.2178 192.077 92.1974 201.277 93.8797 210.793C94.5683 214.688 94.8422 219.12 96.6119 226.095C99.3339 236.823 110.067 251.507 116.303 258.997C116.818 259.615 117.834 259.247 117.894 258.445C118.814 246.339 126.506 230.609 132.252 220.006C134.274 216.275 134.023 211.727 131.712 208.168C125.557 198.689 117.592 184.662 117.804 180.017C117.871 178.523 117.656 177.292 117.266 176.284C115.622 172.041 109.875 173.055 105.328 172.866Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="teres_major_left" d="M60.6492 223.761C78.5883 216.569 78.778 165.503 76.4608 138.657C76.3966 137.913 75.466 137.637 74.9562 138.182C40.3119 175.27 44.3377 189.569 44.2304 205.881C44.1469 218.57 47.3964 219.516 49.2267 218.321C49.3748 218.224 49.4741 218.071 49.5252 217.901L53.4648 204.833C53.6586 204.19 54.4773 204.001 54.9343 204.493L59.3213 209.217C59.4706 209.378 59.5536 209.589 59.5536 209.809V222.981C59.5536 223.56 60.1117 223.976 60.6492 223.761Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="trapezius_middle_left" d="M106.187 125.275C96.355 123.954 84.2781 129.525 78.185 133.229C77.3211 133.754 77.2444 135.475 77.5897 136.425C80.9869 145.772 82.068 156.099 89.8723 162.264C97.621 168.385 106.892 167.804 112.077 166.068C112.393 165.962 112.608 165.682 112.636 165.35C113.742 152.429 109.372 134.035 106.875 125.86C106.779 125.545 106.514 125.318 106.187 125.275Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="deltoid_posterior_left" d="M105.741 121.115C99.8493 120.357 91.1065 112.274 87.1032 107.946C86.8701 107.694 86.5076 107.6 86.183 107.711C63.9671 115.339 55.4294 140.291 53.4267 154.857C53.301 155.771 54.4882 156.141 54.9761 155.358C72.687 126.921 95.9946 120.626 105.741 121.115Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="trapezius_upper_left" d="M110.413 91.1205C123.841 88.3022 132.409 71.1011 135.439 61.6873C135.636 61.076 136.35 60.9209 136.621 61.503C139.895 68.5347 137.062 97.4712 135.843 104.379C134.82 110.179 137.617 172.723 139.229 205.021C139.266 205.758 138.423 206.171 137.851 205.704C110.969 183.713 114.345 138.405 115.412 126.875C116.499 115.138 96.2856 111.443 90.9605 108.508C85.6354 105.574 92.808 94.8154 110.413 91.1205Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="infraspinatus_left" d="M82.7473 104.478C57.0626 109.878 51.7653 132.135 52.3304 143.466C52.353 143.92 52.7578 144.259 53.1228 143.988C53.7136 143.551 54.154 142.695 54.3372 142.198C60.1711 119.369 75.5914 109.217 83.1651 106.744C83.5337 106.623 83.788 106.285 83.788 105.897V105.319C83.788 104.774 83.2803 104.365 82.7473 104.478Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="soleus_2_right" d="M167.157 465.614C174.895 449.008 177.988 463.114 178.568 472.243C178.568 480.937 176.395 501.803 175.526 510.497C174.439 521.364 168.896 531.906 160.854 525.059C152.812 518.213 157.485 486.371 167.157 465.614Z" fill="white"/>
      <path id="achilles_tendon_right" d="M185.524 530.819C193.138 534.895 179.259 569.431 168.683 592.017C167.642 594.24 164.392 593.579 164.253 591.129L160.946 533.097C160.891 532.116 161.437 531.194 162.354 530.841C167.641 528.809 177.736 526.65 185.524 530.819Z" fill="white"/>
      <path id="bicep_femoris_2_right" d="M156.291 334.661C157.378 334.661 165.167 336.937 171.89 338.977C175.606 340.105 177.901 343.8 177.334 347.642C172.498 380.408 166.761 432.033 161.398 432.033C149.77 432.033 151.509 348.028 151.4 341.833C151.292 335.639 154.443 334.661 156.291 334.661Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="soleus_1_right" d="M179.621 512.518C182.489 502.837 181.464 479.502 180.231 464.978C180.016 462.438 180.693 459.908 182.179 457.837C182.668 457.156 183.226 456.507 183.924 456.042C189.707 452.182 192.868 459.863 193.879 464.957C196.456 476.84 200.086 503.694 194.001 516.039C191.43 521.082 185.342 527.936 179.783 519.519C178.46 517.517 178.939 514.819 179.621 512.518Z" fill="white"/>
      <path id="bicep_femoris_1_right" d="M181.177 434.533C183.305 434.303 185.55 438.625 187.214 443.045C187.782 444.555 190.165 444.446 190.462 442.861C194.255 422.651 199.932 387.845 199.543 370.958C199 347.376 185.285 342.811 181.177 342.811C176.395 342.811 175.707 376.175 171.613 399.866L164.484 453.859C164.265 455.515 166.49 456.262 167.316 454.809L176.453 438.719C177.148 437.496 179.778 434.684 181.177 434.533Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="bicep_femoris_3_right " d="M209.215 379.217C210.592 359.588 209.75 345.887 208.865 339.222C208.749 338.344 207.619 338.269 207.341 339.11L203.167 351.718C203.142 351.793 203.128 351.868 203.124 351.947C202.364 368.178 201.308 400.343 203.129 400.083C204.955 399.822 207.947 386.064 209.215 379.217Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="gluteus_maximus_right" d="M194.653 281.557V262.999C194.653 260.744 192.408 259.177 190.334 260.064C157.635 274.052 148.948 305.49 148.689 320.836C148.679 321.428 148.839 321.998 149.173 322.488C157.023 334.028 179.861 339.227 191.451 340.529C192.121 340.605 192.753 340.875 193.263 341.316L196.201 343.86C197.923 345.35 200.603 344.661 201.393 342.525L206.187 329.557C206.321 329.195 206.39 328.812 206.39 328.426V326.075C206.39 311.528 202.74 297.214 195.774 284.444L195.051 283.118C194.79 282.639 194.653 282.102 194.653 281.557Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="forearm_back_2_right" d="M245.54 287.578L245.197 285.179C245.19 285.13 245.179 285.081 245.163 285.033L232.472 245.982C227.183 232.398 216.322 208.38 215.192 220.987C214.135 232.779 232.712 268.505 243.952 288.132C244.425 288.959 245.675 288.522 245.54 287.578Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="forearm_back_1_right" d="M261.379 297.168C262.944 296.299 262.031 290.792 261.379 288.148C257.119 245.982 251.164 222.943 247.578 216.749C246.913 215.6 244.85 211.374 243.693 212.845C243.593 212.972 243.561 213.146 243.568 213.308C244.398 231.954 235.968 234.269 230.067 232.77C229.278 232.569 228.477 233.396 228.822 234.133C236.675 250.905 250.442 282.928 249.86 292.495C249.099 304.993 259.423 298.255 261.379 297.168Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="erector_spinae_right" d="M147.488 270.76C151.906 264.051 148.458 237.057 145.802 222.124C145.556 220.74 146.616 219.465 148.021 219.465C148.998 219.465 149.859 220.094 150.166 221.021C152.355 227.644 156.697 239.335 159.985 243.265C163.353 247.29 163.817 259.52 163.614 266.083C163.592 266.783 163.277 267.437 162.755 267.903L147.755 281.299C146.889 282.073 145.547 282.171 145.048 281.122C144.168 279.269 144.107 275.894 147.488 270.76Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="external_oblique_back_right" d="M191.392 239.461C193.186 235.547 194.866 237.957 195.605 239.945C195.7 240.199 195.739 240.469 195.739 240.74V252.512C195.739 253.504 195.176 254.411 194.286 254.85L186.078 258.903C183.746 260.055 181.33 257.447 182.643 255.201C186.176 249.158 190.103 242.274 191.392 239.461Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="latissimus_dorsi_right" d="M181.806 172.757C191.882 172.338 198.496 165.464 201.288 160.68C201.71 159.957 202.465 159.477 203.302 159.477C204.34 159.477 205.239 160.208 205.326 161.243C205.583 164.325 205.316 169.487 202.912 174.365C201.855 176.509 201.101 179.392 200.57 182.447C198.917 191.968 194.937 201.168 193.255 210.684C192.566 214.579 192.293 219.011 190.523 225.986C187.801 236.714 177.067 251.398 170.831 258.889C170.317 259.506 169.301 259.138 169.24 258.337C168.321 246.23 160.629 230.5 154.882 219.897C152.86 216.166 153.112 211.618 155.423 208.059C161.578 198.58 169.542 184.553 169.331 179.908C169.263 178.415 169.479 177.183 169.869 176.175C171.513 171.932 177.26 172.946 181.806 172.757Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="teres_major_right" d="M226.486 223.652C208.546 216.46 208.357 165.394 210.674 138.548C210.738 137.804 211.669 137.528 212.179 138.073C246.823 175.161 242.797 189.46 242.904 205.772C242.988 218.461 239.738 219.407 237.908 218.212C237.76 218.115 237.661 217.962 237.61 217.792L233.67 204.725C233.476 204.082 232.657 203.892 232.2 204.384L227.813 209.108C227.664 209.269 227.581 209.48 227.581 209.7V222.872C227.581 223.451 227.023 223.867 226.486 223.652Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="trapezius_middle_right" d="M180.947 125.166C190.78 123.845 202.857 129.417 208.95 133.12C209.814 133.646 209.89 135.366 209.545 136.316C206.148 145.663 205.067 155.99 197.262 162.155C189.514 168.276 180.242 167.695 175.058 165.959C174.742 165.853 174.527 165.573 174.498 165.241C173.393 152.32 177.762 133.926 180.26 125.751C180.356 125.436 180.621 125.21 180.947 125.166Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="deltoid_posterior_right" d="M181.394 121.006C187.285 120.248 196.028 112.165 200.032 107.838C200.265 107.586 200.627 107.491 200.952 107.602C223.168 115.23 231.705 140.182 233.708 154.748C233.834 155.662 232.647 156.032 232.159 155.249C214.448 126.812 191.14 120.517 181.394 121.006Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="trapezius_upper_right" d="M176.721 91.0116C163.293 88.1934 154.726 70.9922 151.696 61.5784C151.499 60.9671 150.785 60.812 150.514 61.3942C147.239 68.4258 150.073 97.3623 151.292 104.27C152.315 110.07 149.517 172.615 147.906 204.912C147.869 205.649 148.712 206.062 149.283 205.595C176.165 183.604 172.79 138.297 171.722 126.766C170.636 115.029 190.849 111.334 196.174 108.4C201.499 105.465 194.327 94.7065 176.721 91.0116Z" fill="white" stroke="white" stroke-width="0.21735"/>
      <path id="infraspinatus_right" d="M204.387 104.369C230.072 109.769 235.369 132.026 234.804 143.357C234.782 143.811 234.377 144.15 234.012 143.88C233.421 143.442 232.981 142.586 232.798 142.089C226.964 119.26 211.543 109.108 203.97 106.635C203.601 106.514 203.347 106.176 203.347 105.789V105.21C203.347 104.665 203.854 104.257 204.387 104.369Z" fill="white" stroke="white" stroke-width="0.21735"/>
    </svg>`;

  return svgMarkup;
}

function renderSVG(container) {
  const type = container.dataset.configType;

  const svgMarkup = type === "back" ? renderBackSVG() : renderFrontSVG();

  container.innerHTML = svgMarkup;

  return container.querySelector("svg");
}

function resetColors($svg) {
  $svg.querySelectorAll("[id]").forEach(($el) => {
    if ($el.tagName.toLowerCase() === "g") {
      $el.querySelectorAll("path").forEach(($path) => ($path.style.fill = ""));
    } else {
      $el.style.fill = "";
    }
  });
}

function applyConfig($svg, config, editable = false) {
  resetColors($svg);

  Object.entries(config).forEach(([muscleId, state]) => {
    const $el = $svg.querySelector(`#${muscleId}`);
    if (!$el) return;

    if (editable && state === "selected") {
      fillElement($el, USER_SELECTED_COLOR);
      return;
    }

    const fillColor = STATE_COLORS[state];
    if (!fillColor) return;

    fillElement($el, fillColor);
  });
}

function observeConfig($container, $svg) {
  const observer = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {
      if (mutation.type === "attributes" && mutation.attributeName === "data-config") {
        const newConfig = parseConfig($container);
        const editable = $container.dataset.editable === "true";

        applyConfig($svg, newConfig, editable);
      }
    });
  });

  observer.observe($container, {
    attributes: true,
    attributeFilter: ["data-config"],
  });
}

function createMuscleMap($container) {
  const $svg = renderSVG($container);
  const initialConfig = parseConfig($container);
  const editable = $container.dataset.editable === "true";

  applyConfig($svg, initialConfig, editable);

  if (editable) {
    addEditableListeners($container);
  } else {
    addTooltipListeners($svg, () => parseConfig($container));
  }

  observeConfig($container, $svg);
}

function addEditableListeners($container) {
  $container.addEventListener("click", (e) => {
    const target = e.target.closest("[id]");
    if (!target) return;

    const config = parseConfig($container);
    const resolvedId = resolveMuscleId(target);

    let action;
    if (config[resolvedId]) {
      delete config[resolvedId];
      action = "deselected";
    } else {
      config[resolvedId] = "selected";
      action = "selected";
    }

    $container.dataset.config = JSON.stringify(config);

    $container.dispatchEvent(
      new CustomEvent("muscle-change", {
        detail: { muscleId: resolvedId, action, config },
      }),
    );
  });
}

function fillElement($el, color) {
  if ($el.tagName.toLowerCase() === "g") {
    $el.querySelectorAll("path").forEach(($path) => {
      $path.style.fill = color;
    });
  } else {
    $el.style.fill = color;
  }
}

function resolveMuscleId(target) {
  const group = target.closest("g[id]");
  if (group) {
    return group.id;
  }

  return target.id;
}
